//colors
$default:				rgb(73, 79, 67);
$default-light:			lighten($default, 50%);
$default-lighter:		lighten($default, 60%);
$about:					rgb(41, 140, 118);
$about-light:			lighten($about, 50%);
$about-lighter:			lighten($about, 60%);
$courses:				rgb(50, 84, 53);
$courses-light:			lighten($courses, 50%);
$courses-lighter:		lighten($courses, 60%);
$events: 				rgb(159, 97, 23);
$events-light:			lighten($events, 50%);
$events-lighter:		lighten($events, 60%);
$blog:					rgb(105, 93, 115);
$blog-light:			lighten($blog, 50%);
$blog-lighter:			lighten($blog, 60%);
$publications: 			rgb(198, 81, 70);
$publications-light:	lighten($publications, 20%);
$publications-lighter:	lighten($publications, 40%);
$contact:				rgb(75, 82, 69);
$contact-light:			lighten($contact, 50%);
$contact-lighter:		lighten($contact, 60%);

$sections: 
	default
	$default
	lighten($default, 50%)
	lighten($default, 60%), 

	about
	$about
	lighten($about, 50%)
	lighten($about, 60%), 

	courses
	$courses
	lighten($courses, 50%)
	lighten($courses, 60%), 

	events
	$events
	lighten($events, 50%)
	lighten($events, 60%), 

	blog
	$blog
	lighten($blog, 50%)
	lighten($blog, 60%), 

	publications
	$publications
	lighten($publications, 20%)
	lighten($publications, 40%), 

	contact
	$contact
	lighten($contact, 50%)
	lighten($contact, 60%);

//dimensions
$carousel-width:		654px;
$carousel-margin:		11px;
$carousel-height:		400px;
$control-height:		26px;
$border-width:			3px;
$promo-height:			180px;
$margin:				15px;

//strings
$font:					"Apercu Pro Regular", Helvetica, Arial, sans-serif;
$font-mono:				"Apercu Mono Pro Regular";

//mixins
@mixin shadow() {
	box-shadow: 5px 5px 5px transparentize($default, .5);
}

@mixin background-opacity($color, $opacity) {
	$red:	red($color);
	$green:	green($color);
	$blue:	blue($color);
	background-color: rgba($red, $green, $blue, $opacity);
}

body {
	padding-bottom: 100px; font-family: $font;

	a {
		color: $default;
		&:hover, &:active { color: $default-light; }
		&:focus { outline: none; }
		&.login { cursor: pointer; }
		&.logo { display: block; }

		&.edit { 
			font-size: 100%; opacity: .4;
			&:hover { text-decoration: none; opacity: 1; }
		}
	}

	a.btn, input[type=submit] { border-radius: 0; padding: 3px 50px; text-transform: uppercase; border: 0; }

	form {
		input {
			font-family: $font-mono;
			&[type=checkbox] {
				cursor: pointer;
				&:focus { outline: none; }
			}
			&[type=text], &[type=email], &[type=search], &[type=password], &[type=submit] {
				border-radius: 0; height: $control-height; box-shadow: none;
				&:focus { box-shadow: none; }
			}
		}

		select:focus, option:focus { outline: none; }

		label { font-family: $font-mono; font-weight: normal; font-size: 13px; }
		
		.btn-group {
			font-family: $font-mono;
			&.dropdown {
				width: 100%; position: relative; 
				button { width: 100%; height: $control-height; border-radius: 0; text-align: left; line-height: 1; }
				span.caret { border-width: 9px 6px; position: absolute; top: 9px; right: 4px; }
				ul {
					min-width: 100%; max-height: 300px; overflow-y: scroll; border-radius: 0;
					li {
						a {
							cursor: pointer;
						}
					}
				}
			}
		}

		div.checkbox {
			margin-top: 0; padding: 0;
			label { font-family: $font; }
			.chkbox {
				width: 20px; height: 20px; float: left; margin-right: 10px; background-color: lighten($default, 50%); 	
				text-align: center; color: $default; 
				i { font-size: 180%; line-height: .9; margin-left: -3px; visibility: hidden; }
				&.active i { visibility: visible; }
			}

		}

	}
	
	p { margin: 0 0 $margin 0; }

	dt { font-family: $font-mono; }

	//eg body.courses .switchboard or body.home promo.courses
	@each $section in $sections {
		$name:    nth($section, 1);
		$color:   nth($section, 2);
		$light:   nth($section, 3);
		$lighter: nth($section, 4);
		&.#{$name} form.switchboard, &.home .promo.#{$name} {
			input[type=text] { border-color: $color; }
			.btn-group {
				&.dropdown {
					button { background-color: $light; }
					span.caret { color: $color; }
					ul { 
						background-color: $lighter; 
						li.active a, li a:hover, li.divider { background-color: $light; }
					}
				}
			}
			.chkbox { background-color: $color; }
		}
	}

	.row { 
		padding-top: $margin * 2; 
		&.banner {
			padding-top: $margin; height: 127px;
			div {
				position: relative; 
				nav#utility {
					position: absolute; right: $margin * 2; top: 0;
					a { 
						margin-left: $margin * 2;
						&.dashicons { 
							font-size: 200%; line-height: .7; 
							&:last-child { margin-left: $margin / 2; }
							&:hover, &:focus, &:active { text-decoration: none; }
						}
					}
				}
			}
		}
		&.nav {
			text-align: center; 
			a { 
				text-transform: uppercase; font-size: 20px;
			}
			div.active a, div a:hover { 
				text-decoration: underline; 
				@each $section in $sections {
					$name:    nth($section, 1);
					$color:   nth($section, 2);
					&.#{$name} { color: $color; }
				}
			}
		}
		&.page {
			padding-top: $margin; border-color: $default;
			.content {
				color: $default; 
				.inner { 
					font-size: 20px;
					border-width: $border-width 0 0 0; border-style: solid; 
					h1 { 
						margin: $margin * 2 0; 
						a.edit { text-decoration: none; }
						small { color: inherit; }
					}
					a { text-decoration: underline; }
					p { 
						margin: 0 0 $margin 0; 
						img { margin-top: 7px !important; }
					}
					input[type=text], input[type=email], input[type=password], button { padding: 18px 6px; }
					button span.caret { top: 14px; }

					blockquote {
						clear: left; border-left: $border-width solid $default-lighter;
						p:last-child { margin-bottom: 0; }
					}

					figure {
						margin: 5px 20px 20px -60px; float: left; background-color: $default-light;
						font-family: $font-mono; font-size: 13px;
						figcaption { padding: $margin / 2 $margin $margin * 1.5 $margin / 2; }
						&.portrait { 
							width: 220px; 
							img { width: 100%; height: auto; }
						}
						&.landscape { 
							width: 360px;
							img { width: 100%; height: auto; }
						}
					}
					ul { clear: left; }
					dl {
						overflow: auto; margin: 20px 0; font-size: 85%;
						dt, dd { float: left; margin-bottom: 8px; }
						dt { font-weight: normal; clear: left; width: 90px; text-transform: uppercase; }
						dd { }
					}
				}
			}
			.side {
				form.switchboard {
					border-width: $border-width; border-style: solid; padding: 20px 20px 5px; @include shadow();
				}
				.wallpaper {
					position: relative; padding: $margin * 3 $margin * 2 $margin * 2 $margin * 3; min-height: 400px; font-size: 160%; 
					span { font-family: $font-mono; font-size: 60%; text-transform: uppercase; position: absolute; top: $margin; left: $margin; }
					ul {
						margin: 0; padding: 0;
						li {
							list-style-type: none; 
							&.active a { text-decoration: underline; }
						}
					}
					a:hover { color: $default; }
					&::after {
						content: "";
						background: url(/assets/img/wallpaper-bush1.jpg);
						opacity: 0.3;
						top: 0;
						left: 0;
						bottom: 0;
						right: 0;
						position: absolute;
						z-index: -1;   
					}
				}
			}
		}
	}

	&.home {
		.carousel {
			overflow-x: hidden; margin: $margin 0 0 0; height: $carousel-height; 
			
			button {

				&.slick-prev {
					&::before { font-size: 60px; line-height: .5; }
					left: 20px; 
				}
				
				&.slick-next {
					&::before { font-size: 60px; line-height: .5; }
					right: 60px; 
				}
			}

			.item {
				height: $carousel-height; width: $carousel-width; overflow: hidden;
				color: inherit; 

				.inner { 
					margin: 0 $margin / 2; position: relative; 
					h1 { position: absolute; left: 60px; top: 60px; font-size: 42px; line-height: 1.3; }
					img { width: 100%; height: auto; opacity: .15; }
					.description { position: absolute; left: 60px; top: 280px; text-transform: uppercase; }
					.type { text-transform: uppercase; position: absolute; left: 20px; top: 20px; }
				}

				@each $section in $sections {
					$name:  nth($section, 1);
					$color: nth($section, 2);
					&.#{$name} .inner { 
						background-color: transparentize($color, .7); 
						color: $color;
						a { color: $color; }
					}
				}
				&:hover { text-decoration: none; }
			}
		}
		.promos {
			div.promo { 
				height: $promo-height; border: $border-width solid $default; position: relative;
				@include shadow();

				@each $section in $sections {
					$name:  nth($section, 1);
					$color: nth($section, 2);
					&.#{$name} { 
						border-color: $color; 
						a { color: $color }
					}
				}

				&.events { 
					padding: $margin 20px; font-size: 120%;
					table { 
						width: 100%; 
						th { font-size: 90%; }
						th, td { text-align: center; height: 29px; }
						tbody th { text-align: right; width: 0; }
						a { font-weight: bold; }
					}
				}
				&.courses { 
					form {
						padding: $margin / 2 $margin;
						legend { text-transform: uppercase; border: 0; margin-bottom: 0; }
						label { font-size: 100%; }
						.form-group { 
							margin-bottom: 0; 
							.dropdown-toggle { margin-top: 5px; }
						}
						input[type=submit] {
							background-color: transparent; border: 0;
							text-decoration: underline; text-transform: uppercase; font-size: 18px;
						}

					}
				}
				&.support { 
					padding-top: $promo-height / 4; 
					a { display: block; line-height: 1; text-align: center; font-size: 40px; text-transform: uppercase; }
				}
			}
		}
	}

	@each $section in $sections {
		$name:  nth($section, 1);
		$color: nth($section, 2);
		&.#{$name} { 
			a, small { color: $color; }
			.page {
				.inner { border-color: $color; }
				.content {
					color: $color; 
					a.btn.btn-primary { color: white; background-color: $color; }
				}
				.side {
					form.switchboard { border-color: $color; }
					.wallpaper {
						@include background-opacity($color, .2);
					}
					ul li.active a { color: $color; }
				}
			}
		}
	}

	&.courses {
		.page {
			.content {
				h1 small { display: block; line-height: 1.3; }
				ul { 
					list-style-type: none;  
					&.instructors {
						padding: 0; overflow: auto; margin-top: $margin;
						li {
							overflow: auto;
							img { float: left; margin: 6px $margin 10px 0; }
						}
					}
					&.courses {
						a { font-size: 150%; }
					}
				}
			}
			.side {
				.wallpaper {
					h2 { 
						line-height: 1.2; 
						small { color: inherit; }
					}
					.description { font-size: 80%; }
				}
			}
		}
	}

	&.events {
		.page {
			.page .inner, form.switchboard { border-color: $events; }
			.content {
				color: $events; 
				a { color: $events; }
				div.event {
					div.date { font-weight: bold; }
					div.description {
						margin: 0 0 20px 20px; 
						div.meta {
							font-weight: bold; overflow: auto; 
							div.time, div.price, div.location { float: left; margin-right: 20px; }
							div.button { 
								float: right; 
								a { background-color: $events; color: white; width: 180px; display: block; text-align: center; }
							}
						}
					}
				}
			}
			.side {
				.wallpaper {
					@include background-opacity($events, .2);
				}
			}
		}
	}

	&.blog {
		.row.page {
			.inner, form.switchboard { border-color: $blog; }
			.content {
				.inner {
					color: $blog; 
					a { color: $blog; }
					a.btn.btn-primary { color: white; background-color: $blog; }
					figure { background-color: $blog-light; }
					h1 {
						a { 
							text-decoration: none; 
							&:hover { text-decoration: underline; }
							&.edit:hover { text-decoration: none; }
						}
						small { color: inherit; font-size: 16px; display: block; font-family: $font-mono; margin-bottom: $margin; }
					}
					.post { margin: $margin * 2 0 $margin * 4; }
				}
			}
			.side {
				.wallpaper {
					@include background-opacity($blog, .2);
				}
			}
		}
	}

	&.publications {
		.page {
			.page .inner, form.switchboard { border-color: $publications; }
			.content {
				.inner {
					color: $publications; 
					a { color: $publications; }
					input[type=submit] { background-color: $publications; }
					div.author { margin: -$margin * 2 0 $margin * 2; font-family: $font-mono; }
					figure { background-color: $publications-lighter; }
					blockquote { border-left-color: $publications-lighter; float: left; clear: none; }
					form { margin: 0 0 $margin * 2 0; }
					dl { clear: left; }
					.praise, .about_the_author { clear: left; margin: $margin 0 $margin * 3; }
					h3 { border-bottom: $border-width solid $publications; }
					.publication { 
						margin-bottom: 20px; 
						.inner {
							background-color: $publications-lighter; 
							height: 300px; border: 0;
							background-size: contain; 
							background-position: center;
							background-repeat: no-repeat;
							a { 
								display: block; height: 300px; padding-top: 36%;
								background-color: $publications; opacity: 0;
								div { 
									// display: none; 
									font-size: 80%;
									color: white;
									text-align: center;
									line-height: 1; font-style: italic;
									.separator { border-top: $border-width solid white; width: 20px; margin: 20px auto; }
								}
								&:hover { opacity: .8; }
							}
						} 
					}
				}
			}
			.side {
				.wallpaper {
					@include background-opacity($publications, .2);
				}
			}
		}
	}

	&.contact {
		.page {
			.inner { border-color: $contact; }
			a { 
				color: $contact; 
			}
			.content {
				color: $contact; 
				a.btn-primary { color: white; background-color: $contact; }
				#map-canvas { height: 500px; }
			}
			.side {
				.wallpaper {
					@include background-opacity($contact, .2);
					ul { 
						list-style-type: none; padding: 0;
						li { 
							margin: 20px 0; 
							a { 
								i { margin-right: 10px; }
							}
						}
					}
				}
			}
		}
	}
}