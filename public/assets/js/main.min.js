function alertLoginModal(t){$modal_body=$("#login .modal-body"),$modal_body.find(".alert").size()?$modal_body.find(".alert").first().html(t):$('<div class="alert alert-info" style="display:none;">'+t+"</div>").prependTo($modal_body).slideDown("fast")}function centerModal(){var t=$("#login .modal-dialog").first(),e=($("#login").height()-t.height())/3;t.css("margin-top",e)}function stripeResponseHandler(t,e){var o=$("form#support");e.error?($(".content .inner .alert").size()||$("<div>",{"class":"alert alert-warning"}).prependTo(".content .inner"),$(".content .inner .alert").text(e.error.message),o.find("input[type=submit]").prop("disabled",!1)):($("<input>",{type:"hidden",name:"stripeToken",value:e.id}).appendTo(o),o.get(0).submit())}function format_money(t){return"$"+parseFloat(Math.round(100*t)/100).toFixed(2)}function closeForm(t){t.removeClass("active").find("textarea").val("").animate({height:"48px"})}$("a[href=#login]").click(function(t){t.preventDefault(),$("#login").modal()}),$("#login").on("show.bs.modal",centerModal).on("shown.bs.modal",function(){$("input[name=email]").focus()}),$("#login form").submit(function(){return $(this).hasClass("login")?$.post($(this).attr("action"),$(this).serialize(),function(t){"success"==t.status?($("#login").modal("hide"),location.reload()):alertLoginModal(t.message)}):$.post("/my-hvwc/reset",$(this).serialize(),function(t){alertLoginModal(t.message)}),$(this).find("input[type=submit]").blur(),!1}),$("#login form a").click(function(t){t.preventDefault(),$form=$(this).closest("form"),$form.hasClass("login")?($form.removeClass("login").addClass("reset"),$form.find("h1").html("Reset Password"),$form.find(".form-group.password").slideUp("fast"),$(this).html("Cancel"),$form.find("input[type=submit]").val("Send Reset Email")):($form.removeClass("reset").addClass("login"),$form.find("h1").html("Please log in"),$form.find(".form-group.password").slideDown("fast"),$(this).html("Forgot Password"),$form.find("input[type=submit]").val("Log In")),$form.find("input[name=email]").focus()}),$(window).on("resize",centerModal),$("form#find-a-class").submit(function(){return $(this).find("input").each(function(){$(this).val()||$(this).remove()}),!0}),$(".carousel").slick({arrows:!0,centerMode:!0,centerPadding:"260px",slidesToShow:1,infinite:!0,prevArrow:'<button class="slick-prev" aria-label="previous" data-role="none" type="button" style="display: block;"></button>',nextArrow:'<button class="slick-next" aria-label="previous" data-role="none" type="button" style="display: block;"></button>',responsive:[{breakpoint:400,settings:{infinite:!1,centerPadding:0,arrows:!1}}]}),$("form#support").on("click","label.choice",function(){$("form#support label.choice").removeClass("active"),$("form#support input[name=amount-manual]").val(""),$("form#support input[name=amount]").val($(this).find("input").val()),$(this).addClass("active")}),$("form#support input[name=amount-manual]").change(function(){$("form#support label.choice").removeClass("active"),$("form#support label.choice input").prop("checked",!1),$("form#support input[name=amount]").val($(this).val())}),$("form#support").submit(function(){var t=!1;return $(this).find(".required").each(function(){$(this).val().length?$(this).parent().removeClass("has-error"):($(this).parent().addClass("has-error"),t=!0)}),t?!1:($(this).find("input[type=submit]").prop("disabled",!0),Stripe.card.createToken($(this),stripeResponseHandler),!1)}),$("form#checkout table input").change(function(){var t=0,e=0;$("form#checkout tbody tr").each(function(){var o=$(this).find("input").val()-0,a=$(this).attr("data-price")-0,i=o*a;$(this).find("td.total").html(format_money(i)),t+=i,"publications"==$(this).attr("data-type")&&(e+=o)});var o=2*e;$("form#checkout tfoot tr.subtotal td.value").html(format_money(t)),$("form#checkout tfoot tr.shipping td.value").html(format_money(o)),$("form#checkout tfoot tr.total td.value").html(format_money(t+o))}),$("form.message textarea").focus(function(){$(this).closest("form.message").addClass("active"),$(this).animate({height:"250px"})}),$("form.message a[href=#cancel]").click(function(t){t.preventDefault(),closeForm($(this).closest("form#message"))}),$("form.message").submit(function(){var t=$(this);return $.post($(this).attr("action"),$(this).serialize(),function(e){closeForm(t),$(".my-hvwc .messages").html(e)}),!1}),$("form.reply textarea").focus(function(){$(this).closest("form.reply").addClass("active"),$(this).animate({height:"250px"})}),$("form.reply a[href=#cancel]").click(function(t){t.preventDefault(),closeForm($(this).closest("form#reply"))}),$("form.reply").submit(function(){var t=$(this);return $.post($(this).attr("action"),$(this).serialize(),function(e){closeForm(t),t.siblings("ul.replies").html(e)}).fail(function(t){console.log(t.responseJSON.error)}),!1}),$("form#settings").submit(function(){var t=!0;return $(this).find(".required").each(function(){$(this).val().length?$(this).parent().removeClass("has-error"):($(this).parent().addClass("has-error"),t=!1)}),$("input[name=password]").val()&&($("input[name=password]").val()!=$("input[name=password_confirmation]").val()?($("input[name=password]").closest(".form-group").addClass("has-error"),t=!1):$("input[name=password]").closest(".form-group").removeClass("has-error")),t}),$(function(){function t(t){$.get("/"+t.attr("data-model")+"/ajax",t.serializeArray(),function(t){$(".page .content .inner div.target").html(t)})}$("a").each(function(){var t=new RegExp("/"+window.location.host+"/");this.href&&!t.test(this.href)&&$(this).click(function(t){t.preventDefault(),t.stopPropagation(),window.open(this.href,"_blank")})}),$(window).scroll(function(){$(window).scrollTop()>100?$("body").addClass("scrolled"):$("body").removeClass("scrolled")}),$(".btn-group.dropdown a").click(function(e){e.preventDefault();var o=$(this).closest(".btn-group.dropdown");o.find("span.selected").html($(this).html()),o.find("input").val($(this).attr("data-id")),o.find("li").removeClass("active"),$(this).closest("li").addClass("active");var a=$(this).closest("form.switchboard");a.size()&&t(a)}),$("div.checkbox label").click(function(e){e.preventDefault(),e.stopPropagation(),$(this).find("input").prop("checked",$(this).find(".chkbox").toggleClass("active").hasClass("active"));var o=$(this).closest("form.switchboard");o.size()&&t(o)}),$("form.switchboard").submit(function(){return t($(this)),!1}),$(".target").on("click",".load_more a",function(e){e.preventDefault();var o=$("form.switchboard").first(),a=o.find("input[name=limit]");a.val(parseInt(a.val())+10),t(o)}),$("input[data-stripe=number]").payment("formatCardNumber"),$("input[data-stripe=cvc]").payment("formatCardCVC"),$("input[data-numeric]").payment("restrictNumeric"),$("input[data-phone]").mask("(999) 999-9999")});