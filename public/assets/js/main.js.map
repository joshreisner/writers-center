{"version":3,"sources":["login.js","main.js","page-home.js","page-support.js","page-checkout.js","page-transactions.js","page-my-hvwc.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC5EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC9FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC1BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC3DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC/BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACTA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"main.js","sourcesContent":["//pop the login modal\n$('a[href=#login]').click(function(e){\n\te.preventDefault();\n\t$('#login').modal(); //backdrop not working for me?\n});\n\n//modal, focus on the username\n$('#login')\n.on('show.bs.modal', centerModal)\n.on('shown.bs.modal', function(e) {\n\t$('input[name=email]').focus();\n});\n\n//handle either login or reset password\n$('#login form').submit(function(){\n\tif ($(this).hasClass('login')) {\n\t\t$.post('/my-hvwc/login', $(this).serialize(), function(data) {\n\t\t\t//console.log(data);\n\t\t\tif (data.status == 'success') {\n\t\t\t\t$('#login').modal('hide');\n\t\t\t\t//be great to do this without leaving the page\n\t\t\t\tlocation.reload();\n\t\t\t} else {\n\t\t\t\talertLoginModal(data.message);\n\t\t\t}\n\t\t});\n\t} else {\n\t\t$.post('/my-hvwc/reset', $(this).serialize(), function(data) {\n\t\t\talertLoginModal(data.message);\n\t\t});\n\t}\n\t$(this).find('input[type=submit]').blur();\n\treturn false;\n});\n\n//toggle between login and reset password views\n$('#login form a').click(function(e){\n\te.preventDefault();\n\t$form = $(this).closest('form');\n\tif ($form.hasClass('login')) {\n\t\t//switch to reset\n\t\t$form.removeClass('login').addClass('reset');\n\t\t$form.find('h1').html('Reset Password');\n\t\t$form.find('.form-group.password').slideUp('fast');\n\t\t$(this).html('Cancel');\n\t\t$form.find('input[type=submit]').val('Send Reset Email');\n\t} else {\n\t\t//switch back to login\n\t\t$form.removeClass('reset').addClass('login');\n\t\t$form.find('h1').html('Please log in');\n\t\t$form.find('.form-group.password').slideDown('fast');\n\t\t$(this).html('Forgot Password');\n\t\t$form.find('input[type=submit]').val('Log In');\n\t}\n\t$(this).blur();\n});\n\nfunction alertLoginModal(message) {\n\t$modal_body = $('#login .modal-body');\n\tif ($modal_body.find('.alert').size()) {\n\t\t$modal_body.find('.alert').first().html(message);\n\t\t//todo ding the alert somehow if it's a repeat\n\t} else {\n\t\t$('<div class=\"alert alert-info\" style=\"display:none;\">' + message + '</div>').prependTo($modal_body).slideDown('fast');\n\t}\n}\n\n//vertically center the login modal\nfunction centerModal() {\n\t//$('#login').css('display', 'block');\n\tvar $dialog = $('#login .modal-dialog').first();\n\tvar offset = ($('#login').height() - $dialog.height()) / 3;\n\t$dialog.css('margin-top', offset);\n}\n\n$(window).on('resize', centerModal);\n","$(function(){\n\n\t//open external links in new tab\n\t$('a').each(function() {\n\t\tvar a = new RegExp('/' + window.location.host + '/');\n\t\tif (this.href && !a.test(this.href)) {\n\t\t\t$(this).click(function(e) {\n\t\t\t\te.preventDefault();\n\t\t\t\te.stopPropagation();\n\t\t\t\twindow.open(this.href, '_blank');\n\t\t\t});\n\t\t}\n\t});\n\n\t//set random, unique wallpaper image on each .wallpaper\n\tvar wallpapers = [\n    \t'grayscale-hvwc-area-by-ronnie-levine-july2014-1.jpg',\n    \t'grayscale-hvwc-area-by-ronnie-levine-july2014-2.jpg',\n    \t'grayscale-hvwc-area-by-ronnie-levine-july2014-3.jpg',\n    \t'grayscale-hvwc-area-by-ronnie-levine-july2014-4-cropped.jpg',\n    \t'grayscale-hvwc-area-by-ronnie-levine-july2014-5.jpg',\n    \t'grayscale-hvwc-area-by-ronnie-levine-july2014-6.jpg',\n    \t'grayscale-hvwc-june13-1.jpg',\n    \t'grayscale-hvwc-june13-2a-full-image.jpg',\n    \t'grayscale-hvwc-june13-3.jpg',\n    \t'grayscale-hvwc-june13-4.jpg',\n    \t'sleepy-hollow-river-scene-by-ronnie-levine-1.jpg',\n    \t'sleepy-hollow-river-scene-by-ronnie-levine-2.jpg',\n    \t'sleepy-hollow-river-scene-by-ronnie-levine-3.jpg',\n    \t'sleepy-hollow-river-scene-by-ronnie-levine-4.jpg',\n    \t'sleepy-hollow-river-scene-by-ronnie-levine-5.jpg',\n    \t'sleepy-hollow-river-scene-by-ronnie-levine-6.jpg',\n    \t'sleepy-hollow-river-scene-by-ronnie-levine-7.jpg'\n\t];\n\n\t$('.wallpaper').each(function(){\n\t\tvar random = Math.floor(Math.random() * wallpapers.length);\n\t\t$(this).prepend('<div class=\"image\" style=\"background-image:url(/assets/img/wallpapers/' + wallpapers[random] + ')\"/>');\n\t\twallpapers.splice(random, 1);\n\t})\n\n\t//scroll background\n\t$(window).scroll(function(e){\n\t\tif ($(window).scrollTop() > 100) {\n\t\t\t$('body').addClass('scrolled');\n\t\t} else {\n\t\t\t$('body').removeClass('scrolled');\n\t\t}\n\n\t});\n\n\t//dropdowns\n\t$('.btn-group.dropdown a').click(function(e){\n\t\te.preventDefault();\n\t\tvar parent = $(this).closest('.btn-group.dropdown');\n\t\tparent.find('span.selected').html($(this).html());\n\t\tparent.find('input').val($(this).attr('data-id'));\n\t\tparent.find('li').removeClass('active');\n\t\t$(this).closest('li').addClass('active');\n\t\tvar switchboard = $(this).closest('form.switchboard');\n\t\tif (switchboard.size()) updateSwitchboard(switchboard);\n\t});\n\n\t//checkbox\n\t$('div.checkbox label').click(function(e){\n\t\te.preventDefault();\n\t\te.stopPropagation();\n\t\t$(this).find('input').prop(\n\t\t\t'checked', \n\t\t\t$(this).find('.chkbox').toggleClass('active').hasClass('active')\n\t\t);\n\t\tvar switchboard = $(this).closest('form.switchboard');\n\t\tif (switchboard.size()) updateSwitchboard(switchboard);\n\t});\n\n\t//capture switchboard submit\n\t$('form.switchboard').submit(function(){\n\t\tupdateSwitchboard($(this));\n\t\treturn false;\n\t});\n\n\t//update any switchboard\n\tfunction updateSwitchboard(which) {\n\t\t$.get('/' + which.attr('data-model') + '/ajax', which.serializeArray(), function(data){\n\t\t\t$('.page .content .inner div.target').html(data);\n\t\t});\n\t}\n\n\t//set up input masks\n\t$('input[data-stripe=number]').payment('formatCardNumber');\n\t$('input[data-stripe=cvc]').payment('formatCardCVC');\n\t$('input[data-numeric]').payment('restrictNumeric');\n\n});\n","//home form, prevent empty vals\n$(\"form#find-a-class\").submit(function(){\n    $(this).find('input').each(function() {\n\t\tif (!$(this).val()) $(this).remove();\n    });\n\treturn true;\n});\n\n//home carousel\n$('.carousel').slick({\n\tarrows: true,\n\tcenterMode: true,\n\tcenterPadding: '260px',\n\tslidesToShow: 1,\n\tinfinite: true,\n\tresponsive: [\n\t\t{\n\t\t\tbreakpoint: 400,\n\t\t\tsettings: {\n\t\t\t\tinfinite: false,\n\t\t\t\tcenterPadding: 0,\n\t\t\t\tarrows: false\n\t\t\t}\n\t\t}\n\t]\n});\n","//support page: click on a preset\n$(\"form#support\").on(\"click\", \"label.choice\", function(){\n\t$(\"form#support label.choice\").removeClass(\"active\");\n\t$(\"form#support input[name=amount-manual]\").val(\"\");\n\t$(\"form#support input[name=amount]\").val($(this).find(\"input\").val());\n\t$(this).addClass(\"active\");\n});\n\n//support page: change manual amount\n$(\"form#support input[name=amount-manual]\").change(function(){\n\t$(\"form#support label.choice\").removeClass(\"active\");\n\t$(\"form#support label.choice input\").prop(\"checked\", false);\n\t$(\"form#support input[name=amount]\").val($(this).val());\n});\n\n//support page form handler\n$('form#support').submit(function(event) {\n\t\n\t//loop through to check required field values\n\tvar hasError = false;\n\t$(this).find('.required').each(function(){\n\t\tif ($(this).val().length) {\n\t\t\t$(this).parent().removeClass(\"has-error\");\n\t\t} else {\n\t\t\t$(this).parent().addClass(\"has-error\");\n\t\t\thasError = true;\n\t\t}\n\t});\n\tif (hasError) return false;\n\t\n\t//disable the submit button to prevent repeated clicks\n\t$(this).find('input[type=submit]').prop('disabled', true);\n\n\t//start stripe request\n\tStripe.card.createToken($(this), stripeResponseHandler);\n\n\t//prevent the form from submitting with the default action\n\treturn false;\n});\n\nfunction stripeResponseHandler(status, response) {\n\tvar $form = $('form#support');\n\n\tif (response.error) {\n\t\t// Show the errors on the form\n\t\tif (!$(\".content .inner .alert\").size()) {\n\t\t\t$(\"<div>\", { class: \"alert alert-warning\" }).prependTo(\".content .inner\");\n\t\t}\n\t\t$(\".content .inner .alert\").text(response.error.message);\n\t\t$form.find('input[type=submit]').prop('disabled', false);\n\t} else {\n\t\t$(\"<input>\", {\n\t\t\ttype: \"hidden\",\n\t\t\tname: \"stripeToken\",\n\t\t\tvalue: response.id\n\t\t}).appendTo($form);\n\t\t$form.get(0).submit();\n\t}\n};\n","$(\"form#checkout table input\").change(function(){\n\n\t//loop through and add up all the values\n\tvar total = 0, publications = 0;\n\t$(\"form#checkout tbody tr\").each(function(){\n\t\tvar quantity = $(this).find(\"input\").val() - 0;\n\t\tvar price = $(this).attr(\"data-price\") - 0;\n\t\tvar row_total = quantity * price;\n\n\t\t//set row total\n\t\t$(this).find(\"td.total\").html(row_total);\n\n\t\t//increment main total\n\t\ttotal += row_total;\n\n\t\t//increment shipping total\n\t\tif ($(this).attr(\"data-type\") == 'publications') {\n\t\t\tpublications += quantity;\n\t\t}\n\n\t});\n\n\t//update footer totals\n\tvar shipping = publications * 2;\n\t$(\"form#checkout tfoot tr.subtotal td.value\").html(total);\n\t$(\"form#checkout tfoot tr.shipping td.value\").html(shipping);\n\t$(\"form#checkout tfoot tr.total td.value\").html(total + shipping);\n\n\t//save the new value to the session\n\n\n});","\n//auto submit form when changing a select, hide empty values from query string\n$('nav.filter').on('change', 'select', function(){\n\tvar $form = $(this).closest('form');\n\t$form.find('select').each(function(){\n\t\tif ($(this).val() == '') $(this).prop('disabled', true);\n\t});\n\t$form.submit();\n\t$form.find('select').prop('disabled', false);\n});","\n//posts!\n$('form.message textarea').focus(function(){\n\t$(this).closest('form.message').addClass('active');\n\t$(this).animate({ height: '250px' });\n});\n\n$('form.message a[href=#cancel]').click(function(e){\n\te.preventDefault();\n\tcloseForm($(this).closest('form#message'));\n});\n\n$('form.message').submit(function(){\n\tvar $form = $(this);\n\t$.post($(this).attr('action'), $(this).serialize(), function(data){\n\t\tcloseForm($form);\n\t\t$('.my-hvwc .messages').html(data);\n\t});\n\treturn false;\n});\n\n//comments!\n$('form.reply textarea').focus(function(){\n\t$(this).closest('form.reply').addClass('active');\n\t$(this).animate({ height: '250px' });\n});\n\n$('form.reply a[href=#cancel]').click(function(e){\n\te.preventDefault();\n\tcloseForm($(this).closest('form#reply'));\n});\n\n$('form.reply').submit(function(){\n\tvar $form = $(this);\n\t$.post($(this).attr('action'), $(this).serialize(), function(data){\n\t\tcloseForm($form);\n\t\t$form.siblings('ul.replies').html(data);\n\t}).fail(function(XMLHttpRequest, textStatus, errorThrown) {\n\t\tconsole.log(XMLHttpRequest.responseJSON.error);\n \t});\n\treturn false;\n});\n\nfunction closeForm($form) {\n\t$form.removeClass('active').find('textarea').val('').animate({ height: '48px' });\t\n}"],"sourceRoot":"/source/"}